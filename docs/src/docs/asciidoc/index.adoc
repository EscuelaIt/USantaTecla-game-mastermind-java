= Mastermind. Solución 10.4. *mvp.pm.-proxy*
Santa Tecla <parqueNaturalSantaTecla@gmail.com>
:toc-title: Índice
:toc: left

:idprefix:
:idseparator: -
:imagesdir: images

== Requisitos 4. *Cliente/Servidor*

[cols="50,50"]
|===

a|
- link:https://en.wikipedia.org/wiki/Mastermind_(board_game)[*Wiki*] - link:https://www.youtube.com/watch?v=2-hTeg2M6GQ[*Youtube*]
* _Funcionalidad: **Básica** + **undo/redo**_
* _Interfaz: [line-through]*Gráfica* y **Texto**_
* _Distribución: **Standalone** + [lime-background]#**Client/Server**#_
* _Persistencia: **No**_

a|

image::Dibujo.jpg[]

|===


== Vista de Lógica/Diseño

=== Arquitectura

- _Modelo/Vista/Presentador con Presentador del Modelo con Vista Achicada_

[plantuml,arquitecturaVersion10,svg]

....

package mastermind #DDDDDD { } 
mastermind .down.> mastermind.controllers
mastermind .down.> mastermind.views

package mastermind.controllers #DDDDDD { } 
package java.util{ }
mastermind.controllers .down.> java.util
mastermind.controllers .down.> mastermind.models
mastermind.controllers .down.> mastermind.utils

package mastermind.distributed #DDDDDD { } 
mastermind.distributed .down.> mastermind.controllers
mastermind.distributed .down.> mastermind
mastermind.distributed .down.> mastermind.distributed.dispatchers

package mastermind.distributed.dispatchers #DDDDDD { } 
mastermind.distributed.dispatchers .down.> mastermind.controllers
package java.util{ }
mastermind.distributed.dispatchers .down.> java.util
mastermind.distributed.dispatchers .down.> mastermind.utils

package mastermind.models #DDDDDD { } 
package java.util{ }
mastermind.models .down.> java.util
mastermind.models .down.> mastermind.utils

package mastermind.utils #DDDDDD { } 
package java.util{ }
mastermind.utils .down.> java.util
package java.net{ }
mastermind.utils .down.> java.net
package java.io{ }
mastermind.utils .down.> java.io

package mastermind.views #DDDDDD { } 
mastermind.views .down.> mastermind.controllers
mastermind.views .down.> mastermind.utils

....

=== Paquete _mastermind_

[plantuml,mastermindVersion10,svg]

....

class  mastermind.Mastermind{
- logic: Logic
- view: View
# Mastermind()
# {abstract} isStandalone(): boolean
# play(): void
}
mastermind.Mastermind *-down-> mastermind.controllers.Logic
mastermind.Mastermind *-down-> mastermind.views.View

class  mastermind.MastermindStandalone{
+ MastermindStandalone()
+ {static} main(String[]): void
# isStandalone(): Boolean
}
mastermind.Mastermind <|-down- mastermind.MastermindStandalone

....

=== Paquete _mastermind.views_

[plantuml,mastermindViews,svg]

....

class  mastermind.views.Color{
+ {static} RED: Color
+ {static} BLUE: Color
+ {static} YELLOW: Color
+ {static} GREEN: Color
+ {static} ORANGE: Color
+ {static} PURPLE: Color
- initial: char
- Color(char)
+ {static} valueOf(String): Color
+ {static} getInstance(char): Color
+ {static} getInstance(int): Color
+ getInitial(): char
+ {static} allInitials(): String
}
mastermind.views.Color ..> mastermind.views.Color

class  mastermind.views.Command{
# playController: PlayController
# Command(PlayController, String)
}
mastermind.utils.Command <|-down- mastermind.views.Command
mastermind.views.Command *-down-> mastermind.controllers.PlayController
mastermind.views.Command ..> mastermind.views.GameView
mastermind.views.Command..> mastermind.views.Message

class  mastermind.views.Error{
+ {static} DUPLICATED: Error
+ {static} WRONG_CHARACTERS: Error
+ {static} WRONG_LENGTH: Error
- message: String
- Error(String)
+ {static} valueOf(String): Error
+ getMessage(): String
}
mastermind.views.Error ..> mastermind.views.Error
 mastermind.views.Error ..>  mastermind.views.Color

class  mastermind.views.GameView{
+ GameView(PlayController)
}
mastermind.utils.WithConsoleView <|-down- mastermind.views.GameView
mastermind.views.GameView ..> mastermind.controllers.PlayController
mastermind.views.GameView..> mastermind.views.SecretCombinationView
mastermind.views.GameView..>  mastermind.views.ProposedCombinationView
mastermind.views.GameView..>  mastermind.views.ResultView
mastermind.views.GameView..> mastermind.views.Message

class  mastermind.views.Message{
+ {static} TURN: Message
+ {static} SECRET: Message
+ {static} RESUME: Message
+ {static} RESULT: Message
+ {static} PROPOSED_COMBINATION: Message
+ {static} TITLE: Message
+ {static} WINNER: Message
+ {static} LOOSER: Message
+ {static} OPTION: Message
+ {static} PROPOSE_COMMAND: Message
+ {static} UNDO_COMMAND: Message
+ {static} REDO_COMMAND: Message
- message: String
- Message(String)
+ {static} valueOf(String): Message
+ getMessage(): String
}
mastermind.views.Message ..> mastermind.views.Message

class  mastermind.views.PlayMenu{
+ PlayMenu(PlayController)
}
mastermind.utils.Menu <|-down- mastermind.views.PlayMenu
mastermind.views.PlayMenu ..> mastermind.controllers.PlayController
mastermind.views.PlayMenu *-down-> mastermind.views.ProposeCommand
mastermind.views.PlayMenu *-down-> mastermind.views.UndoCommand
mastermind.views.PlayMenu *-down-> mastermind.views.RedoCommand

class  mastermind.views.PlayView{
~ PlayView()
~ interact(PlayController): void
}
mastermind.utils.WithConsoleView <|-down- mastermind.views.PlayView
mastermind.views.PlayView ..> mastermind.controllers.PlayController
mastermind.views.PlayView ..> mastermind.views.PlayMenu

class  mastermind.views.ProposeCommand{
~ ProposeCommand(PlayController)
# execute(): void
# isActive(): boolean
}
mastermind.views.Command <|-down- mastermind.views.ProposeCommand
mastermind.views.ProposeCommand ..> mastermind.views.ProposedCombinationView
mastermind.views.ProposeCommand ..> mastermind.views.Error

class  mastermind.views.ProposedCombinationView{
- {static} ERROR_CODE: int
~ ProposedCombinationView()
~ write(int[]): void
~ read(): int[]
}
mastermind.utils.WithConsoleView <|-down- mastermind.views.ProposedCombinationView
mastermind.views.ProposedCombinationView..> mastermind.views.Message
 mastermind.views.ProposedCombinationView ..>  mastermind.views.Color

class  mastermind.views.RedoCommand{
~ RedoCommand(PlayController)
# execute(): void
# isActive(): boolean
}
mastermind.views.Command <|-down- mastermind.views.RedoCommand

class  mastermind.views.ResultView{
~ ResultView()
~ writeln(int[]): void
}
mastermind.utils.WithConsoleView <|-down- mastermind.views.ResultView
mastermind.views.ResultView..> mastermind.views.Message

class  mastermind.views.ResumeView{
~ ResumeView()
~ interact(ResumeController): void
}
mastermind.views.ResumeView ..> mastermind.controllers.ResumeController
mastermind.views.ResumeView..> mastermind.views.Message

class  mastermind.views.SecretCombinationView{
~ SecretCombinationView()
~ writeln(int): void
}
mastermind.utils.WithConsoleView <|-down- mastermind.views.SecretCombinationView
mastermind.views.SecretCombinationView..> mastermind.views.Message

class  mastermind.views.StartView{
~ StartView()
~ interact(StartController): void
}
mastermind.utils.WithConsoleView <|-down- mastermind.views.StartView
mastermind.views.StartView ..> mastermind.controllers.StartController
mastermind.views.StartView ..> mastermind.views.SecretCombinationView
mastermind.views.StartView..> mastermind.views.Message

class  mastermind.views.UndoCommand{
~ UndoCommand(PlayController)
# execute(): void
# isActive(): boolean
}
mastermind.views.Command <|-down- mastermind.views.UndoCommand

class  mastermind.views.View{
- startView: StartView
- playView: PlayView
- resumeView: ResumeView
+ View()
+ visit(ResumeController): void
+ visit(PlayController): void
+ visit(StartController): void
+ interact(AcceptorController): void
}
mastermind.controllers.ControllersVisitor <|-down- mastermind.views.View
mastermind.views.View *-down-> mastermind.views.PlayView
mastermind.views.View *-down-> mastermind.views.StartView
mastermind.views.View *-down-> mastermind.views.ResumeView
mastermind.views.View ..> mastermind.controllers.AcceptorController

....

=== Paquete _mastermind.controllers_

[plantuml,mastermindControllersVersion10,svg]

....

class  mastermind.controllers.AcceptorController{
# tcpip: TCPIP
~ AcceptorController(TCPIP, Session)
+ {abstract} accept(ControllersVisitor): void
}
mastermind.controllers.Controller <|-down- mastermind.controllers.AcceptorController
mastermind.controllers.AcceptorController *-down-> mastermind.utils.TCPIP
mastermind.controllers.AcceptorController ..> mastermind.controllers.ControllersVisitor

class  mastermind.controllers.Controller{
# session: Session
~ Controller(Session)
+ getWidth(): int
+ getValueState(): StateValue
}
mastermind.controllers.Controller -down-> mastermind.models.Session
mastermind.controllers.Controller ..> mastermind.models.StateValue

class  mastermind.controllers.ControllersVisitor{
+ {abstract} visit(StartController): void
+ {abstract} visit(PlayController): void
+ {abstract} visit(ResumeController): void
}
mastermind.controllers.ControllersVisitor ..> mastermind.controllers.ResumeController
mastermind.controllers.ControllersVisitor ..> mastermind.controllers.StartController
mastermind.controllers.ControllersVisitor ..> mastermind.controllers.PlayController

class  mastermind.controllers.Logic{
# session: Session
# acceptorControllers: Map<StateValue, AcceptorController>
# startController: StartController
# playController: PlayController
# resumeController: ResumeController
- tcpip: TCPIP
+ Logic(boolean)
+ close(): void
+ getController(): AcceptorController
}
mastermind.controllers.Logic *-down-> mastermind.controllers.ResumeController
mastermind.controllers.Logic *-down-> mastermind.models.Session
mastermind.controllers.Logic *-down-> mastermind.models.StateValue
mastermind.controllers.Logic *-down-> java.util.Map
mastermind.controllers.Logic *-down-> mastermind.controllers.StartController
mastermind.controllers.Logic *-down-> mastermind.utils.TCPIP
mastermind.controllers.Logic *-down-> mastermind.controllers.PlayController
mastermind.controllers.Logic *-> mastermind.controllers.AcceptorController

class  mastermind.controllers.PlayController{
- proposalController: ProposalController
- undoController: UndoController
- redoController: RedoController
# PlayController(Session, TCPIP)
+ accept(ControllersVisitor): void
+ proposeCombination(int[]): int
+ undoable(): boolean
+ redoable(): boolean
+ undo(): void
+ isLooser(): boolean
+ redo(): void
+ isWinner(): boolean
+ getTurn(): int
+ getAllCodes(): int[][][]
}
mastermind.controllers.AcceptorController <|-down- mastermind.controllers.PlayController
mastermind.controllers.PlayController *-down-> mastermind.controllers.RedoController
mastermind.controllers.PlayController *-down-> mastermind.controllers.UndoController
mastermind.controllers.PlayController *-down-> mastermind.controllers.ProposalController
mastermind.controllers.PlayController ..> mastermind.models.Session

class  mastermind.controllers.ProposalController{
+ {static} NO_ERROR: int
+ ProposalController(Session)
+ proposeCombination(int[]): int
+ isLooser(): boolean
+ isWinner(): boolean
+ getTurn(): int
+ getAllCodes(): int[][][]
}
mastermind.controllers.Controller <|-down- mastermind.controllers.ProposalController

class  mastermind.controllers.RedoController{
+ RedoController(Session)
+ redoable(): boolean
+ redo(): void
}
mastermind.controllers.Controller <|-down- mastermind.controllers.RedoController

class  mastermind.controllers.ResumeController{
+ ResumeController(Session, TCPIP)
+ accept(ControllersVisitor): void
+ resume(boolean): void
}
mastermind.controllers.AcceptorController <|-down- mastermind.controllers.ResumeController
mastermind.controllers.ResumeController ..> mastermind.models.Session

class  mastermind.controllers.StartController{
+ StartController(Session, TCPIP)
+ accept(ControllersVisitor): void
+ start(): void
}
mastermind.controllers.AcceptorController <|-down- mastermind.controllers.StartController
mastermind.controllers.StartController ..> mastermind.models.Session

class  mastermind.controllers.UndoController{
+ UndoController(Session)
+ undoable(): boolean
+ undo(): void
}
mastermind.controllers.Controller <|-down- mastermind.controllers.UndoController

....

=== Paquete _mastermind.distributed_

[plantuml,mastermindDistributed,svg]

....

class  mastermind.distributed.FrameType{
+ {static} START: FrameType
+ {static} STATE: FrameType
+ {static} UNDO: FrameType
+ {static} REDO: FrameType
+ {static} UNDOABLE: FrameType
+ {static} REDOABLE: FrameType
+ {static} WINNER: FrameType
+ {static} LOOSER: FrameType
+ {static} TURN: FrameType
+ {static} ALLCODES: FrameType
+ {static} PROPOSECOMBINATION: FrameType
+ {static} WIDTH: FrameType
+ {static} RESUME: FrameType
+ {static} CLOSE: FrameType
- FrameType()
+ {static} valueOf(String): FrameType
+ {static} parser(String): FrameType
}

class  mastermind.distributed.LogicServer{
+ LogicServer(Boolean)
+ createDispatchers(DispatcherPrototype): void
}
mastermind.controllers.Logic <|-down- mastermind.distributed.LogicServer
mastermind.distributed.LogicServer ..> mastermind.distributed.dispatchers.DispatcherPrototype

class  mastermind.distributed.MastermindClient{
+ MastermindClient()
+ {static} main(String[]): void
# isStandalone(): Boolean
}
mastermind.Mastermind <|-down- mastermind.distributed.MastermindClient

class  mastermind.distributed.MastermindServer{
- dispatcherPrototype: DispatcherPrototype
- logic: LogicServer
- MastermindServer()
+ {static} main(String[]): void
- serve(): void
}
mastermind.distributed.MastermindServer *-down-> mastermind.distributed.dispatchers.DispatcherPrototype
mastermind.distributed.MastermindServer *-down-> mastermind.distributed.LogicServer

....

=== Paquete _mastermind.distributed.dispatchers_

[plantuml,mastermindDistributerDispatchers,svg]

....

class  mastermind.distributed.dispatchers.AllCodesDispatcher{
+ AllCodesDispatcher(PlayController)
+ dispatch(): void
}
mastermind.distributed.dispatchers.Dispatcher <|-down- mastermind.distributed.dispatchers.AllCodesDispatcher
mastermind.distributed.dispatchers.AllCodesDispatcher ..> mastermind.controllers.PlayController

class  mastermind.distributed.dispatchers.Dispatcher{
# acceptorController: AcceptorController
# tcpip: TCPIP
+ Dispatcher(AcceptorController)
+ {abstract} dispatch(): void
+ associate(TCPIP): void
}
mastermind.distributed.dispatchers.Dispatcher *-down-> mastermind.controllers.AcceptorController
mastermind.distributed.dispatchers.Dispatcher --> mastermind.utils.TCPIP

class  mastermind.distributed.dispatchers.DispatcherPrototype{
- tcpip: TCPIP
- dispatcherMap: Map<FrameType, Dispatcher>
+ DispatcherPrototype()
+ add(FrameType, Dispatcher): void
+ dispatch(FrameType): void
+ serve(): void
}
mastermind.distributed.dispatchers.DispatcherPrototype *-down-> java.util.Map
mastermind.distributed.dispatchers.DispatcherPrototype *-down-> mastermind.utils.TCPIP
mastermind.distributed.dispatchers.DispatcherPrototype --> mastermind.distributed.dispatchers.Dispatcher
mastermind.distributed.dispatchers.DispatcherPrototype --> mastermind.distributed.FrameType

class  mastermind.distributed.dispatchers.LooserDispatcher{
+ LooserDispatcher(PlayController)
+ dispatch(): void
}
mastermind.distributed.dispatchers.Dispatcher <|-down- mastermind.distributed.dispatchers.LooserDispatcher
mastermind.distributed.dispatchers.LooserDispatcher ..> mastermind.controllers.PlayController

class  mastermind.distributed.dispatchers.ProposeCombinationDispatcher{
+ ProposeCombinationDispatcher(PlayController)
+ dispatch(): void
}
mastermind.distributed.dispatchers.Dispatcher <|-down- mastermind.distributed.dispatchers.ProposeCombinationDispatcher
mastermind.distributed.dispatchers.ProposeCombinationDispatcher ..> mastermind.controllers.PlayController

class  mastermind.distributed.dispatchers.RedoableDispatcher{
+ RedoableDispatcher(PlayController)
+ dispatch(): void
}
mastermind.distributed.dispatchers.Dispatcher <|-down- mastermind.distributed.dispatchers.RedoableDispatcher
mastermind.distributed.dispatchers.RedoableDispatcher ..> mastermind.controllers.PlayController

class  mastermind.distributed.dispatchers.RedoDispatcher{
+ RedoDispatcher(PlayController)
+ dispatch(): void
}
mastermind.distributed.dispatchers.Dispatcher <|-down- mastermind.distributed.dispatchers.RedoDispatcher
mastermind.distributed.dispatchers.RedoDispatcher ..> mastermind.controllers.PlayController

class  mastermind.distributed.dispatchers.ResumeDispatcher{
+ ResumeDispatcher(ResumeController)
+ dispatch(): void
}
mastermind.distributed.dispatchers.Dispatcher <|-down- mastermind.distributed.dispatchers.ResumeDispatcher
mastermind.distributed.dispatchers.ResumeDispatcher ..> mastermind.controllers.ResumeController

class  mastermind.distributed.dispatchers.StartDispatcher{
+ StartDispatcher(StartController)
+ dispatch(): void
}
mastermind.distributed.dispatchers.Dispatcher <|-down- mastermind.distributed.dispatchers.StartDispatcher
mastermind.distributed.dispatchers.StartDispatcher ..> mastermind.controllers.StartController

class  mastermind.distributed.dispatchers.StateDispatcher{
+ StateDispatcher(PlayController)
+ dispatch(): void
}
mastermind.distributed.dispatchers.Dispatcher <|-down- mastermind.distributed.dispatchers.StateDispatcher
mastermind.distributed.dispatchers.StateDispatcher ..> mastermind.controllers.PlayController

class  mastermind.distributed.dispatchers.TurnDispatcher{
+ TurnDispatcher(PlayController)
+ dispatch(): void
}
mastermind.distributed.dispatchers.Dispatcher <|-down- mastermind.distributed.dispatchers.TurnDispatcher
mastermind.distributed.dispatchers.TurnDispatcher ..> mastermind.controllers.PlayController

class  mastermind.distributed.dispatchers.UndoableDispatcher{
+ UndoableDispatcher(PlayController)
+ dispatch(): void
}
mastermind.distributed.dispatchers.Dispatcher <|-down- mastermind.distributed.dispatchers.UndoableDispatcher
mastermind.distributed.dispatchers.UndoableDispatcher ..> mastermind.controllers.PlayController

class  mastermind.distributed.dispatchers.UndoDispatcher{
+ UndoDispatcher(PlayController)
+ dispatch(): void
}
mastermind.distributed.dispatchers.Dispatcher <|-down- mastermind.distributed.dispatchers.UndoDispatcher
mastermind.distributed.dispatchers.UndoDispatcher ..> mastermind.controllers.PlayController

class  mastermind.distributed.dispatchers.WidthDispatcher{
+ WidthDispatcher(PlayController)
+ dispatch(): void
}
mastermind.distributed.dispatchers.Dispatcher <|-down- mastermind.distributed.dispatchers.WidthDispatcher
mastermind.distributed.dispatchers.WidthDispatcher ..> mastermind.controllers.PlayController

class  mastermind.distributed.dispatchers.WinnerDispatcher{
+ WinnerDispatcher(PlayController)
+ dispatch(): void
}
mastermind.distributed.dispatchers.Dispatcher <|-down- mastermind.distributed.dispatchers.WinnerDispatcher
mastermind.distributed.dispatchers.WinnerDispatcher ..> mastermind.controllers.PlayController

....

=== Paquete _mastermind.models_

[plantuml,mastermindModelVersion10,svg]

....

class  mastermind.models.Color{
+ {static} RED: Color
+ {static} BLUE: Color
+ {static} YELLOW: Color
+ {static} GREEN: Color
+ {static} ORANGE: Color
+ {static} PURPLE: Color
- Color()
+ {static} valueOf(String): Color
~ {static} length(): int
~ {static} getInstance(int): Color
}

class  mastermind.models.Combination{
- {static} WIDTH: int
# colors: List<Color>
# Combination()
+ {static} getWidth(): int
}
mastermind.models.Combination *-down-> java.util.List
mastermind.models.Combination *-down-> mastermind.models.Color

class  mastermind.models.Error{
+ {static} DUPLICATED: Error
+ {static} WRONG_CHARACTERS: Error
+ {static} WRONG_LENGTH: Error
- Error()
+ {static} valueOf(String): Error
}

class  mastermind.models.Game{
- {static} MAX_LONG: int
- secretCombination: SecretCombination
- proposedCombinations: List<ProposedCombination>
- results: List<Result>
- turn: int
+ Game()
+ clear(): void
+ set(Memento): void
+ proposeCombination(ProposedCombination): void
+ getWidth(): int
+ isWinner(): boolean
+ getTurn(): int
+ getCodes(): int[][][]
+ isLooser(): boolean
+ createMemento(): Memento
}
mastermind.models.Game *-down-> java.util.List
mastermind.models.Game *-down-> mastermind.models.SecretCombination
mastermind.models.Game *-down-> mastermind.models.Result
mastermind.models.Game --> mastermind.models.ProposedCombination
mastermind.models.Game ..> mastermind.models.Memento

class  mastermind.models.Memento{
- proposedCombinations: List<ProposedCombination>
- results: List<Result>
- turn: int
~ Memento(int)
~ set(ProposedCombination, Result): void
~ getSize(): int
~ getResult(int): Result
~ getTurn(): int
~ getProposedCombination(int): ProposedCombination
}
mastermind.models.Memento *-down-> java.util.List
mastermind.models.Memento --> mastermind.models.Result
mastermind.models.Memento --> mastermind.models.ProposedCombination

class  mastermind.models.ProposedCombination{
+ ProposedCombination()
~ contains(Color, int): boolean
~ contains(Color): boolean
+ {static} getInstance(int[]): ProposedCombination
+ copy(): ProposedCombination
+ {static} isValid(int[]): Error
~ getCodes(): int[]
~ setCodes(int[]): void
}
mastermind.models.Combination <|-down- mastermind.models.ProposedCombination
mastermind.models.ProposedCombination ..> mastermind.models.Error

class  mastermind.models.Registry{
- mementoList: ArrayList<Memento>
- game: Game
- firstPrevious: int
~ Registry(Game)
+ reset(): void
~ registry(): void
~ undoable(): boolean
~ redoable(): boolean
~ undo(Game): void
~ redo(Game): void
}
mastermind.models.Registry *-down-> mastermind.models.Memento
mastermind.models.Registry *-down-> java.util.ArrayList
mastermind.models.Registry --> mastermind.models.Game

class  mastermind.models.Result{
- blacks: int
- whites: int
~ Result(int, int)
+ copy(): Result
~ isWinner(): boolean
~ getCodes(): int[]
~ getBlacks(): int
~ getWhites(): int
}
mastermind.models.Result ..> mastermind.models.Result

class  mastermind.models.SecretCombination{
~ SecretCombination()
~ getResult(ProposedCombination): Result
}
mastermind.models.Combination <|-down- mastermind.models.SecretCombination
mastermind.models.SecretCombination ..> mastermind.models.Result
mastermind.models.SecretCombination ..> mastermind.models.ProposedCombination

class  mastermind.models.Session{
- state: State
- game: Game
- registry: Registry
- tcpip: TCPIP
+ Session(TCPIP)
+ next(): void
+ resume(): void
+ proposeCombination(ProposedCombination): void
+ undoable(): boolean
+ redoable(): boolean
+ getWidth(): int
+ undo(): void
+ getValueState(): StateValue
+ isWinner(): boolean
+ getTurn(): int
+ redo(): void
+ getCodes(): int[][][]
+ isLooser(): boolean
}
mastermind.models.Session *-down-> mastermind.models.Registry
mastermind.models.Session *-down-> mastermind.models.State
mastermind.models.Session *-down-> mastermind.utils.TCPIP
mastermind.models.Session *-down-> mastermind.models.Game
mastermind.models.Session ..> mastermind.models.StateValue
mastermind.models.Session ..> mastermind.models.ProposedCombination

class  mastermind.models.State{
- stateValue: StateValue
+ State()
+ next(): void
+ reset(): void
+ getValueState(): StateValue
}
mastermind.models.State --> mastermind.models.StateValue

class  mastermind.models.StateValue{
+ {static} INITIAL: StateValue
+ {static} IN_GAME: StateValue
+ {static} FINAL: StateValue
+ {static} EXIT: StateValue
- StateValue()
+ {static} valueOf(String): StateValue
}

....

=== Paquete _mastermind.utils_

[plantuml,mastermindUtilsVersion10,svg]
....

class  mastermind.utils.ClosedInterval{
- min: int
- max: int
+ ClosedInterval(int, int)
+ includes(int): boolean
}

class  mastermind.utils.Command{
# title: String
# Command(String)
# {abstract} execute(): void
# {abstract} isActive(): boolean
~ getTitle(): String
}
mastermind.utils.WithConsoleView <|-down- mastermind.utils.Command

class  mastermind.utils.Console{
- bufferedReader: BufferedReader
+ Console()
+ write(char): void
+ write(String): void
+ readInt(String): int
+ readChar(String): char
+ readString(String): String
+ writeln(int): void
+ writeln(String): void
+ writeln(): void
- writeError(String): void
}
mastermind.utils.Console *-down-> java.io.BufferedReader

class  mastermind.utils.Menu{
- commandList: ArrayList<Command>
+ Menu()
+ execute(): void
# addCommand(Command): void
}
mastermind.utils.WithConsoleView <|-down- mastermind.utils.Menu
mastermind.utils.Menu *-down-> java.util.ArrayList
mastermind.utils.Menu --> mastermind.utils.Command

class  mastermind.utils.TCPIP{
- serverSocket: ServerSocket
- socket: Socket
- out: PrintWriter
- in: BufferedReader
+ TCPIP(PrintWriter, Socket, BufferedReader)
+ TCPIP(ServerSocket, PrintWriter, BufferedReader, Socket)
+ close(): void
+ {static} createClientSocket(): TCPIP
+ {static} createServerSocket(): TCPIP
+ receiveInt(): int
+ send(int): void
+ send(String): void
+ send(boolean): void
+ receiveBoolean(): boolean
+ receiveLine(): String
}
mastermind.utils.TCPIP *-down-> java.net.ServerSocket
mastermind.utils.TCPIP *-down-> java.io.PrintWriter
mastermind.utils.TCPIP *-down-> java.net.Socket
mastermind.utils.TCPIP *-down-> java.io.BufferedReader
mastermind.utils.TCPIP ..> mastermind.utils.TCPIP

class  mastermind.utils.WithConsoleView{
# console: Console
# WithConsoleView()
}
mastermind.utils.WithConsoleView *-down-> mastermind.utils.Console

class  mastermind.utils.YesNoDialog{
- {static} AFIRMATIVE: char
- {static} NEGATIVE: char
- {static} QUESTION: String
- {static} MESSAGE: String
+ YesNoDialog()
+ read(String): boolean
- {static} isNegative(char): boolean
- {static} isAfirmative(char): boolean
}
mastermind.utils.WithConsoleView <|-down- mastermind.utils.YesNoDialog

....

== Calidad de Software

=== Diseño

- [red]#_**Baja Cohesión**: de Lógica y Controladores que controlan y comunican_#
- [red]#_**Alto Acoplamiento**: de Lógica y Controladores a tecnologías de comunicación_#
- [red]#_**Open/Close**: en Lógica y Controladores cuando hay que cambiar el código de éstos con nuevas tecnologías de comunicación_#

=== Rediseño

- [red]#_**Clases Grandes**: de Controladores con distintas ramas para distintas tecnologías de comunicación_#

== Vista de Desarrollo/Implementación

[plantuml,diagramaImplementacionStandalone,svg]
....

package "  "  as mastermind {
}
package "  "  as mastermind.controllers {
}
package "  "  as mastermind.models {
}
package "  "  as mastermind.views {
}
package "  "  as mastermind.utils {
}
package "  "  as java.io {
}
package "  "  as java.util {
}

[mastermind.jar] as jar

jar *--> mastermind
jar *--> mastermind.controllers
jar *--> mastermind.models
jar *--> mastermind.views
jar *--> mastermind.utils
jar *--> java.io
jar *--> java.util

....

[plantuml,diagramaImplementacionClient,svg]
....

package "  "  as mastermind {
}
package "  "  as mastermind.distributed {
}
package "  "  as mastermind.controllers {
}
package "  "  as mastermind.models {
}
package "  "  as mastermind.views {
}
package "  "  as mastermind.utils {
}
package "  "  as java.io {
}
package "  "  as java.util {
}

[mastermindClient.jar] as jarClient

jarClient *--> mastermind
jarClient *--> mastermind.distributed
jarClient *--> mastermind.controllers
jarClient *--> mastermind.models
jarClient *--> mastermind.views
jarClient *--> mastermind.utils
jarClient *--> java.io
jarClient *--> java.util

....

[plantuml,diagramaImplementacionServer,svg]
....

package "  "  as mastermind {
}
package "  "  as mastermind.distributed {
}
package "  "  as mastermind.distributed.dispatchers {
}
package "  "  as mastermind.controllers {
}
package "  "  as mastermind.models {
}
package "  "  as mastermind.views {
}
package "  "  as mastermind.utils {
}
package "  "  as java.io {
}
package "  "  as java.util {
}

[mastermindServer.jar] as jarServer

jarServer *--> mastermind
jarServer *--> mastermind.distributed
jarServer *--> mastermind.distributed.dispatchers
jarServer *--> mastermind.controllers
jarServer *--> mastermind.models
jarServer *--> mastermind.views
jarServer *--> mastermind.utils
jarServer *--> java.io
jarServer *--> java.util
....

== Vista de Despliegue/Física

[plantuml,diagramaDespliegue,svg]
....

package stanalone {

node standaloneNode #DDDDDD [
<b>Personal Computer</b>
----
memory : xxx Mb
cpu : xxx GHz
]

[ masterming.jar ] as standaloneComponent

}

standaloneNode *--> standaloneComponent

package clientServer {

node clientNode #DDDDDD [
<b>Client Computer</b>
----
memory : xxx Mb
cpu : xxx GHz
]

[ mastermingClient.jar ] as clientComponent

node serverNode #DDDDDD [
<b>Server Computer</b>
----
memory : xxx Mb
cpu : xxx GHz
]

[ mastermingServer.jar ] as serverComponent

}

clientNode *--> clientComponent
serverNode *--> serverComponent

clientNode -right-> serverNode : TCP/IP
....

== Vista de Procesos

- No hay concurrencia



